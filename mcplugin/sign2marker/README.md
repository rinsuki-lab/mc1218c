# sign2marker

このプラグインは、ゲーム内で看板を置いたところが BlueMap 上にマーカーとして表示されるようにするプラグインです。

## 概要

* 看板の表側の一行目を `[poi]` だけにし、二行目以降に説明を書くと、看板がある位置に BlueMap 上でマーカーが表示されます。BlueMap上でマーカーをクリックすると、看板の二行目以降の説明が出ます。
* 看板を書き変えた時、一行目が `[poi]` の場合はマーカーが更新(なかった場合は作成)されます。一行目が `[poi]` でなくなった場合はマーカーが削除されます。
* 看板が何らかの原因で壊れた (プレーヤーが壊した、爆発で壊れた、周囲のブロックが何もなくなった、など) 場合、BlueMapからもマーカーが削除されます。
* BlueMap上に表示されるマーカーには「看板の2行目以降の内容」「マーカーがある座標」「最後に更新したプレーヤー名とその現実時間 (JST)」が(この順番で)記載されます。
* マーカーが作成・更新・削除された場合、ゲーム内の全体チャットに誰が・どこの看板を操作したかの通知が出ます。
* マーカーは対応する看板があるディメンションにのみ表示されます。
* マーカーを作成・更新した場合、最終変更者の名前がマーカーに記録され、BlueMap上で表示されます。
* マーカーは BlueMap のマーカーグループ `Sign2Marker` に入ります。

## 内部仕様

データはプラグインのデータフォルダの中の `markers/{ディメンション}/chunk.{チャンクX}.{チャンクZ}.yaml` にチャンクごとに以下の情報が保存されます。

* 看板の位置 (x, y, z)
* 内容 (二行目以降)
* 最終更新者のプレイヤー名とUUID

BlueMap が Enable されたタイミングで全てのファイルを読み込み、 BlueMapにマーカー情報を登録します。
